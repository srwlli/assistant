{
  "stub_id": "STUB-053",
  "name": "mcp-docs-workflow-refactor",
  "category": "refactor",
  "priority": "high",
  "created": "2025-12-22",
  "description": "Refactor docs-mcp to separate concerns: standards discovery (coderef-context), documentation generation (coderef-docs), and workflow embedding (coderef-workflow)",
  "vision": "4 focused MCP systems under unified coderef brand with automated, decoupled workflows",
  "target_project": "docs-mcp",
  "target_path": "C:\\Users\\willh\\.mcp-servers\\docs-mcp",
  "related_workorders": [
    {
      "feature_name": "context-generation",
      "project": "coderef-system",
      "path": "C:\\Users\\willh\\Desktop\\projects\\coderef-system\\coderef\\working\\context-generation",
      "purpose": "Phases 1-6: Complexity scoring, task-specific context, edge case detection, test patterns, examples, agentic formatting",
      "feeds_into": "coderef-workflow (uses generated context.json and task-context.json)"
    },
    {
      "feature_name": "modular-widget-system-pwa-electron",
      "project": "scriptboard",
      "path": "C:\\Users\\willh\\Desktop\\clipboard_compannion\\next\\coderef\\working\\modular-widget-system-pwa-electron",
      "purpose": "New widget-based dashboard architecture (PWA + Electron)",
      "feeds_into": "Displays coderef-workflow orchestration data via widgets (workorder status, agent progress, task tracking)"
    }
  ],
  "scope": {
    "phase_1": "Strategic planning document (current state, target architecture, benefits, roadmap)",
    "phase_2": "Extract coderef-context server (standards discovery)",
    "phase_3": "Extract coderef-docs server (documentation generation)",
    "phase_4": "Extract coderef-workflow server (planning and coordination)",
    "phase_5": "Integrate all systems with unified MCP protocol"
  },
  "current_problems": [
    "docs-mcp mixes workorder + documents in same system",
    "Standards discovery manual (establish_standards tool)",
    "Standards not embedded in context.json",
    "Standards not fed to workorder generation",
    "Agents confused about tool boundaries",
    "Systems tightly coupled"
  ],
  "target_architecture": {
    "coderef-context": "Code analysis, pattern discovery, auto-publish to coderef-docs",
    "coderef-docs": "Auto-generated markdown docs from discovered standards + foundation docs",
    "coderef-workflow": "Planning, coordination, auto-embed standards into tasks",
    "coderef-personas": "Agent behaviors (already exists, no changes)"
  },
  "automated_flow": "coderef-context discovers standards → coderef-docs auto-generates markdown → coderef-workflow auto-embeds in tasks",
  "active_workorders": [
    {
      "order": 1,
      "feature": "mcp-doc-workflow-refactor",
      "workorder_id": "WO-MCP-DOC-WORKFLOW-REFACTOR-001",
      "status": "in_progress",
      "location": "C:\\Users\\willh\\.mcp-servers\\docs-mcp\\coderef\\working\\mcp-doc-workflow-refactor"
    },
    {
      "order": 2,
      "feature": "context-generation",
      "workorder_id": "WO-CODEREF-CONTEXT-ENHANCEMENT-001",
      "status": "in_progress",
      "location": "C:\\Users\\willh\\Desktop\\projects\\coderef-system\\coderef\\working\\context-generation"
    },
    {
      "order": 3,
      "feature": "modular-widget-system-pwa-electron",
      "workorder_id": "WO-MODULAR-WIDGET-SYSTEM-PWA-ELECTRON-001",
      "status": "in_progress",
      "location": "C:\\Users\\willh\\Desktop\\clipboard_compannion\\next\\coderef\\working\\modular-widget-system-pwa-electron"
    },
    {
      "order": 4,
      "feature": "mcp-integration-layer",
      "workorder_id": "WO-MCP-INTEGRATION-LAYER-001",
      "status": "planned",
      "location": "Cross-project",
      "description": "Integrate git-mcp and claude-filesystem-mcp with all 4 coderef servers + dashboard"
    }
  ],
  "coordination_flow": {
    "phase_1_extraction": "Extract coderef-workflow from docs-mcp (24 tools)",
    "phase_2_enhancement": "Build coderef-context Phases 1-6 (outputs context.json, task-context.json)",
    "phase_3_integration_core": "Wire coderef-workflow to import from coderef-context",
    "phase_4_dashboard": "New scriptboard widget system displays coderef-workflow orchestration data",
    "phase_5_mcp_integration": "Integrate git-mcp and claude-filesystem-mcp with all 4 coderef servers",
    "result": "Unified system: 6 MCP servers (context, workflow, docs, testing, git, filesystem) + dashboard (all decoupled, all talking via clean APIs)"
  }
}
